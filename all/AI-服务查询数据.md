```mermaid
graph TD
    %% 客户端侧
    C1[客户端] -->|1. 发起HTTP/HTTPS请求| C2[客户端网络层]
    C2 -->|2. 封装请求头/参数（如查询条件）| C3[TCP协议栈]
    C3 -->|3. 三次握手建立TCP连接| C4[数据拆分为TCP报文段]
    C4 -->|4. 通过网络传输（多数据包）| S1[服务端TCP协议栈]
    
    %% 服务端侧
    S1 -->|5. 重组TCP报文段为字节流| S2[服务端网络层]
    S2 -->|6. 解析HTTP请求（路由/参数）| S3[应用服务层<br/>(.NET Web API/Controller)]
    S3 -->|7. 调用数据访问层（DAL）| S4[数据访问层<br/>(ADO.NET/EF Core)]
    
    %% 数据库交互层
    S4 -->|8. 建立数据库连接（如Oracle）| DB1[数据库服务器]
    DB1 -->|9. 解析SQL查询（语法/执行计划）| DB2[查询数据（磁盘I/O）]
    DB2 -->|10. 分批返回结果集（数据库侧流式）| S4
    
    %% 服务端数据处理（关键：同步/异步读取）
    S4 -->|11. 异步流式读取<br/>await reader.ReadAsync()| S5[逐行处理数据<br/>(转换/验证/填充DataTable)]
    S5 -->|12. 组装响应数据（JSON/XML）| S3
    
    %% 服务端响应传输
    S3 -->|13. 封装HTTP响应（状态码/数据）| S2
    S2 -->|14. 字节流拆分为TCP报文段| S1
    S1 -->|15. TCP连接保持/关闭（四次挥手）| C3
    C3 -->|16. 重组TCP报文段为响应字节流| C2
    C2 -->|17. 解析HTTP响应数据| C1
    C1 -->|18. 渲染/处理数据（如前端展示）| C6[客户端完成]
    
    %% 关键备注节点
    note1[备注1：TCP层负责可靠传输（重传/排序/校验），应用层无需关心分包]
    note2[备注2：数据库返回为流式（逐行推送），服务端通过DataReader异步读取，降低内存占用]
    note3[备注3：服务端组装响应时可批量/逐行返回（如SSE/分页），取决于接口设计]
    
    %% 连接备注
    S4 -.-> note1
    DB2 -.-> note2
    S3 -.-> note3
```